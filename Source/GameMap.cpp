#include "stdafx.h"
#include "Resource.h"
#include <mmsystem.h>
#include <ddraw.h>
#include "audio.h"
#include "gamelib.h"
#include "GameMap.h"

namespace game_framework
{
GameMap::GameMap()
	: X(0), Y(0), sx(110), sy(110), battle_sx(-1430), battle_sy(-730), MW(60), MH(60),
	  house_x(240), house_y(120)
{
	//water:2~14
	int map_init[100][35] =
	{
		{
			1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
			1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
		},
		{
			1, 2, 2, 8, 0, 0, 0, 4, 2, 8, 0, 15, 15, 15, 0, 0, 4, 2,
			2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1
		},
		{
			1, 6, 6, 7, 0, 0, 0, 4, 2, 8, 0, 0, 15, 15, 0, 0, 4, 2, 2,
			2, 2, 2, 11, 6, 6, 6, 6, 6, 6, 6, 6, 6, 13, 2, 1
		},
		{
			1, 24, 23, 23, 23, 23, 0, 4, 2, 8, 0, 0, 15, 15, 0, 0, 4, 2,
			2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 1
		},
		{
			1, 23, 23, 23, 23, 23, 0, 16, 18, 20, 32, 32, 15, 15, 32, 32,
			4, 2, 2, 2, 2, 2, 8, 0, 15, 15, 0, 0, 0, 0, 0, 0, 4, 2, 1
		},
		{
			1, 23, 23, 23, 23, 23, 0, 17, 19, 21, 32, 32, 32, 32, 32, 32, 5,
			6, 6, 6, 6, 6, 7, 0, 0, 15, 0, 0, 0, 0, 0, 0, 4, 2, 1
		},
		{
			1, 23, 23, 23, 23, 23, 0, 4, 2, 8, 0, 0, 0, 0, 32, 32, 0, 0,
			0, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 6, 1
		},
		{
			1, 23, 23, 23, 23, 23, 0, 4, 2, 8, 0, 0, 0, 0, 32, 32, 0, 0,
			0, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 10, 10, 10, 10, 10, 9, 4, 2, 8, 0, 0, 0, 15, 32, 32, 0, 0, 0,
			15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 2, 2, 2, 2, 2, 8, 4, 2, 8, 0, 0, 15, 15, 32, 32, 0, 0, 0, 15,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 26, 26, 29, 2, 2, 8, 4, 2, 8, 0, 0, 0, 15, 32, 32, 0, 0, 15, 15,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 15, 0, 28, 2, 2, 12, 14, 2, 8, 0, 0, 0, 15, 32, 32, 0, 0,
			15, 15, 0, 0, 0, 0, 3, 10, 9, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 15, 0, 28, 2, 2, 2, 2, 2, 8, 0, 0, 15, 15, 32, 32, 0, 0, 15,
			15, 0, 0, 3, 10, 14, 2, 12, 9, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 15, 0, 28, 2, 11, 6, 6, 6, 7, 0, 15, 15, 15, 32, 32, 0, 0,
			15, 15, 0, 0, 4, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 15, 0, 28, 2, 8, 0, 0, 0, 0, 0, 15, 15, 15, 32, 32, 15, 15,
			15, 15, 15, 0, 4, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 15, 0, 28, 2, 8, 0, 15, 0, 0, 0, 0, 15, 15, 32, 32, 15, 15,
			15, 15, 15, 0, 4, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 15, 0, 28, 2, 25, 15, 15, 15, 15, 15, 15, 15, 15, 32,
			32, 15, 15, 15, 15, 15, 0, 5, 13, 2, 11, 6, 7, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 15, 0, 28, 2, 25, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15,
			15, 15, 15, 0, 5, 6, 7, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 3, 10, 30, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15,
			15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 3, 10, 10, 10,
			10, 10, 9, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 2, 2,
			2, 2, 8, 15, 0, 0, 0, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 11, 6,
			13, 2, 8, 15, 0, 0, 0, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 8, 15,
			4, 2, 8, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 12,
			10, 14, 2, 8, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 12, 9, 0, 0, 0, 0, 0, 0, 0, 4, 2, 2,
			2, 2, 2, 8, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 5, 6, 6, 6,
			6, 6, 7, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			0, 0, 0, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 2, 12, 10, 9, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			0, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 4, 2, 2, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 5, 13, 2, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 4, 2, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 4, 2, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 5, 13, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 4, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 4, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 3, 14, 2, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 4, 2, 2, 2, 2, 11, 7, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 0,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 5, 6, 6, 13, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 0,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 0, 15, 15,
			15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 4, 2, 12, 9, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 4, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 5, 13, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 0, 0, 0, 15, 15, 15, 15, 15, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 4, 2, 12, 9, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 4, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 5, 13, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 4, 2, 12, 9, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 4, 2, 2, 12, 9, 0, 0, 0, 0, 0, 0,
			0, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 5, 13, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 5, 13, 2, 8, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 3, 10, 14, 2, 8, 0, 0, 0, 0, 0, 0, 0,
			0, 15, 15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 3, 14, 2, 2, 2, 8, 0, 0, 0, 0, 0, 0, 0,
			0, 0, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 4, 2, 11, 13, 2, 12, 9, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 3, 14, 2, 8, 5, 13, 2, 8, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 3, 14, 2, 2, 8, 0, 4, 2, 8, 0, 0, 0, 0, 0, 0,
			15, 15, 15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 4, 2, 2, 11, 7, 3, 14, 2, 8, 0, 0, 0, 0, 0, 0,
			0, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 3, 14, 2, 2, 12, 9, 4, 2, 11, 7, 0, 0, 0, 0,
			0, 0, 0, 0, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 4, 2, 2, 2, 2, 8, 4, 2, 12, 10, 9, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 3, 14, 2, 2, 2, 2, 8, 4, 2, 2, 2, 8, 0, 0, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 4, 2, 2, 2, 2, 11, 7, 5, 6, 13, 2, 8, 0, 0, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 4, 2, 2, 11, 6, 7, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 4, 2, 2, 8, 0, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 5, 6, 6, 7, 0, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 0,
			15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 2, 8, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 5, 6, 7, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15,
			15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 15, 15,
			15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 15, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 0, 0, 0,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 15, 15,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 15, 15,
			0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15,
			15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 15, 15, 15, 15, 15,
			15, 15, 15, 15, 15, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
		},
		{
			1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
			1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1
		}
	};

	for (int i = 0; i < 100; i++)
		// 更新地圖
	{
		for (int j = 0; j < 35; j++)
		{
			map[i][j] = map_init[i][j];
		}
	}
}

void GameMap::LoadBitmap()
{
	black.LoadBitmap(IDB_BLACK);
	house.LoadBitmap(IDB_HOUSE, RGB(255, 255, 255));
	tree.LoadBitmap(IDB_GRASS);
	tree1.LoadBitmap(IDB_GRASS1);
	tree2.LoadBitmap(IDB_GRASS2);
	tree3.LoadBitmap(IDB_GRASS3);
	tree4.LoadBitmap(IDB_GRASS4);
	tree5.LoadBitmap(IDB_GRASS5);
	tree6.LoadBitmap(IDB_GRASS6);
	tree7.LoadBitmap(IDB_GRASS7);
	water0.LoadBitmap(IDB_WATER0);
	water1.LoadBitmap(IDB_WATER1);
	water2.LoadBitmap(IDB_WATER2);
	water3.LoadBitmap(IDB_WATER3);
	water4.LoadBitmap(IDB_WATER4);
	water5.LoadBitmap(IDB_WATER5);
	water6.LoadBitmap(IDB_WATER6);
	water7.LoadBitmap(IDB_WATER7);
	water8.LoadBitmap(IDB_WATER8);
	water9.LoadBitmap(IDB_WATER9);
	water10.LoadBitmap(IDB_WATER10);
	water11.LoadBitmap(IDB_WATER11);
	water12.LoadBitmap(IDB_WATER12);
	bridge0.LoadBitmap(IDB_BRIDGE0);
	bridge1.LoadBitmap(IDB_BRIDGE1);
	bridge2.LoadBitmap(IDB_BRIDGE2);
	bridge3.LoadBitmap(IDB_BRIDGE3);
	bridge4.LoadBitmap(IDB_BRIDGE4);
	bridge5.LoadBitmap(IDB_BRIDGE5);
	road0.LoadBitmap(IDB_ROAD_0);
	boss_door.LoadBitmapA(IDB_BOSS_DOOR, RGB(255, 255, 255));
}

int GameMap::ScreenX(int x)
{
	return x - sx;
}

int GameMap::ScreenY(int y)
{
	return y - sy;
}

void GameMap::SetLastScreenXY(int sx, int sy)
{
	lastScreenX = sx;
	lastScreenY = sy;
}

int GameMap::GetScreenX()
{
	return sx;
}

int GameMap::GetScreenY()
{
	return sy;
}

int GameMap::GetLastScreenX()
{
	return lastScreenX;
}

int GameMap::GetLastScreenY()
{
	return lastScreenY;
}

void GameMap::MoveScreenX(int x)
{
	sx += x;
}

void GameMap::MoveScreenY(int y)
{
	sy += y;
}

void GameMap::SetScreenXY(int x, int y)
{
	sx = x;
	sy = y;
}

void GameMap::SetBattleScreenXY()
{
	sx = battle_sx;
	sy = battle_sy;
}

void GameMap::OnShow()
{
	int x = 48 - sx;
	int y = 48 - sy;

	for (int i = 0; i < 100; i++)
	{
		for (int j = 0; j < 35; j++)
		{
			switch (map[i][j])
			{
				case 0:
					tree.SetTopLeft(x + (MW * i), y + (MH * j));
					tree.ShowBitmap();
					break;

				case 1:
					black.SetTopLeft(x + (MW * i), y + (MH * j));
					black.ShowBitmap();
					break;

				case 2:
					water0.SetTopLeft(x + (MW * i), y + (MH * j));
					water0.ShowBitmap();
					break;

				case 3:
					water1.SetTopLeft(x + (MW * i), y + (MH * j));
					water1.ShowBitmap();
					break;

				case 4:
					water2.SetTopLeft(x + (MW * i), y + (MH * j));
					water2.ShowBitmap();
					break;

				case 5:
					water3.SetTopLeft(x + (MW * i), y + (MH * j));
					water3.ShowBitmap();
					break;

				case 6:
					water4.SetTopLeft(x + (MW * i), y + (MH * j));
					water4.ShowBitmap();
					break;

				case 7:
					water5.SetTopLeft(x + (MW * i), y + (MH * j));
					water5.ShowBitmap();
					break;

				case 8:
					water6.SetTopLeft(x + (MW * i), y + (MH * j));
					water6.ShowBitmap();
					break;

				case 9:
					water7.SetTopLeft(x + (MW * i), y + (MH * j));
					water7.ShowBitmap();
					break;

				case 10:
					water8.SetTopLeft(x + (MW * i), y + (MH * j));
					water8.ShowBitmap();
					break;

				case 11:
					water9.SetTopLeft(x + (MW * i), y + (MH * j));
					water9.ShowBitmap();
					break;

				case 12:
					water10.SetTopLeft(x + (MW * i), y + (MH * j));
					water10.ShowBitmap();
					break;

				case 13:
					water11.SetTopLeft(x + (MW * i), y + (MH * j));
					water11.ShowBitmap();
					break;

				case 14:
					water12.SetTopLeft(x + (MW * i), y + (MH * j));
					water12.ShowBitmap();
					break;

				case 15:
					tree1.SetTopLeft(x + (MW * i), y + (MH * j));
					tree1.ShowBitmap();
					break;

				case 16:
					bridge0.SetTopLeft(x + (MW * i), y + (MH * j));
					bridge0.ShowBitmap();
					break;

				case 17:
					bridge1.SetTopLeft(x + (MW * i), y + (MH * j));
					bridge1.ShowBitmap();
					break;

				case 18:
					bridge2.SetTopLeft(x + (MW * i), y + (MH * j));
					bridge2.ShowBitmap();
					break;

				case 19:
					bridge3.SetTopLeft(x + (MW * i), y + (MH * j));
					bridge3.ShowBitmap();
					break;

				case 20:
					bridge4.SetTopLeft(x + (MW * i), y + (MH * j));
					bridge4.ShowBitmap();
					break;

				case 21:
					bridge5.SetTopLeft(x + (MW * i), y + (MH * j));
					bridge5.ShowBitmap();
					break;

				case 24:
					house.SetTopLeft(x + (MW * i), y + (MH * j));
					house.ShowBitmap();
					break;

				case 25:
					tree2.SetTopLeft(x + (MW * i), y + (MH * j));
					tree2.ShowBitmap();
					break;

				case 26:
					tree3.SetTopLeft(x + (MW * i), y + (MH * j));
					tree3.ShowBitmap();
					break;

				case 27:
					tree4.SetTopLeft(x + (MW * i), y + (MH * j));
					tree4.ShowBitmap();
					break;

				case 28:
					tree5.SetTopLeft(x + (MW * i), y + (MH * j));
					tree5.ShowBitmap();
					break;

				case 29:
					tree6.SetTopLeft(x + (MW * i), y + (MH * j));
					tree6.ShowBitmap();
					break;

				case 30:
					tree7.SetTopLeft(x + (MW * i), y + (MH * j));
					tree7.ShowBitmap();
					break;

				case 32:
					road0.SetTopLeft(x + (MW * i), y + (MH * j));
					road0.ShowBitmap();
					break;
			}
		}
	}

	boss_door.SetTopLeft(x + (MW * 83), y + (MH * 13));
	boss_door.ShowBitmap();
}

int GameMap::IsEmpty(int x, int y)
{
	// 回傳可以走的路
	int gx = x / 60;
	int gy = y / 60;
	return !(map[gx][gy] ==  1 || map[gx][gy] ==  2 || map[gx][gy] == 15 ||
	         map[gx][gy] == 23 || map[gx][gy] == 24 || map[gx][gy] == 25 ||
	         map[gx][gy] == 26 || map[gx][gy] == 27 || map[gx][gy] == 28 ||
	         map[gx][gy] == 29 || map[gx][gy] == 30 || map[gx][gy] == 31);
}
int GameMap::GetBossDoorX()
{
	// 回傳守護獸位址X
	return 48  + (MW * 83);
}
int GameMap::GetBossDoorX2()
{
	// 回傳守護獸位址X2
	return 48  + (MW * 83) + boss_door.Width();
}
int GameMap::GetBossDoorY2()
{
	// 回傳守護獸位址Y2
	return 48  + (MH * 12) + boss_door.Height();
}
int GameMap::GetBossDoorY()
{
	// 回傳守護獸位址Y
	return 48  + (MH * 13);
}
}